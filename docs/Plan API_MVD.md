# –ü–ª–∞–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ API –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

**–î–∞—Ç–∞:** 2026-01-29
**–°—Ç–∞—Ç—É—Å:** –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## 1. –°–≤–æ–¥–∫–∞: –ß—Ç–æ –º–æ–∂–µ–º —Å–¥–µ–ª–∞—Ç—å –ë–ï–ó –ï–°–ò–ê

### ‚úÖ –†–µ–∞–ª–∏–∑—É–µ–º —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ (–ø–∞—Ä—Å–∏–Ω–≥ –≥–æ—Å. —Å–µ—Ä–≤–∏—Å–æ–≤)

| ‚Ññ | –°–µ—Ä–≤–∏—Å | –ò—Å—Ç–æ—á–Ω–∏–∫ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –°–ª–æ–∂–Ω–æ—Å—Ç—å |
|---|--------|----------|-----------|-----------|
| 1 | **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ç–µ–Ω—Ç–∞** | –ì–£–í–ú –ú–í–î | üî¥ P0 | –°—Ä–µ–¥–Ω—è—è |
| 2 | **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—Ä–µ—Ç–∞ –Ω–∞ –≤—ä–µ–∑–¥** | –ì–£–í–ú –ú–í–î | üî¥ P0 | –°—Ä–µ–¥–Ω—è—è |
| 3 | **–ü–æ–ª—É—á–µ–Ω–∏–µ –ò–ù–ù** | –§–ù–° | üü° P1 | –°—Ä–µ–¥–Ω—è—è |
| 4 | **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –†–í–ü** | –ì–£–í–ú –ú–í–î | üü¢ P2 | –ù–∏–∑–∫–∞—è |
| 5 | **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –í–ù–ñ** | –ì–£–í–ú –ú–í–î | üü¢ P2 | –ù–∏–∑–∫–∞—è |
| 6 | **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –≥—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–∞** | –ì–£–í–ú –ú–í–î | üü¢ P2 | –ù–∏–∑–∫–∞—è |
| 7 | **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –Ω–∞ –≤—ä–µ–∑–¥** | –ì–£–í–ú –ú–í–î | üü¢ P2 | –ù–∏–∑–∫–∞—è |
| 8 | **–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä 90/180** | –õ–æ–∫–∞–ª—å–Ω–æ | üî¥ P0 | –ù–∏–∑–∫–∞—è |

### ‚ö†Ô∏è –ß–µ—Ä–µ–∑ –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤ / –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ API

| ‚Ññ | –°–µ—Ä–≤–∏—Å | –ü–æ—á–µ–º—É –Ω—É–∂–µ–Ω –ø–∞—Ä—Ç–Ω—ë—Ä | –í–∞—Ä–∏–∞–Ω—Ç—ã |
|---|--------|----------------------|----------|
| 1 | **–°–ù–ò–õ–°** | –¢–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –ï–°–ò–ê | ESIA Pro, —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—å |
| 2 | **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (–º–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —É—á—ë—Ç)** | –ù–µ—Ç –ø—É–±–ª–∏—á–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ | –ó–∞–ø—Ä–æ—Å –≤ –ú–í–î, –ø–∞—Ä—Ç–Ω—ë—Ä-–ú–§–¶ |
| 3 | **–ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π –∫–∞—Ä—Ç—ã** | –ù–µ—Ç –æ–Ω–ª–∞–π–Ω-—Å–µ—Ä–≤–∏—Å–∞ | –¢–æ–ª—å–∫–æ –ª–∏—á–Ω—ã–π –≤–∏–∑–∏—Ç |
| 4 | **–î–∞–Ω–Ω—ã–µ –∏–∑ –¶–ü–ì** | –¢—Ä–µ–±—É–µ—Ç –ï–°–ò–ê | ESIA Pro (~5.5 –º–ª–Ω —Ä—É–±.) |

---

## 2. –î–µ—Ç–∞–ª—å–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤

### 2.1 –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ç–µ–Ω—Ç–∞ –Ω–∞ —Ä–∞–±–æ—Ç—É

**–ò—Å—Ç–æ—á–Ω–∏–∫:** https://—Å–µ—Ä–≤–∏—Å—ã.–≥—É–≤–º.–º–≤–¥.—Ä—Ñ/info-service.htm?sid=2000

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**

| –ü–æ–ª–µ | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ | –§–æ—Ä–º–∞—Ç | –ü—Ä–∏–º–µ—Ä | –û—Ç–∫—É–¥–∞ –≤–∑—è—Ç—å |
|------|-------------|--------|--------|--------------|
| `service_type` | ‚úÖ | enum | `PATENT` | –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ |
| `doc_series` | ‚úÖ | string | `77` | –õ–∏—Ü–µ–≤–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ –ø–∞—Ç–µ–Ω—Ç–∞ |
| `doc_number` | ‚úÖ | string | `1234567` | –õ–∏—Ü–µ–≤–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ –ø–∞—Ç–µ–Ω—Ç–∞ |
| `blank_series` | ‚úÖ | string | `0017` | –û–±–æ—Ä–æ—Ç–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ –ø–∞—Ç–µ–Ω—Ç–∞ |
| `blank_number` | ‚úÖ | string | `123456` | –û–±–æ—Ä–æ—Ç–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ –ø–∞—Ç–µ–Ω—Ç–∞ |
| `passport_number` | ‚úÖ | string | `AB1234567` | –¢–æ–ª—å–∫–æ –Ω–æ–º–µ—Ä, –±–µ–∑ —Å–µ—Ä–∏–∏ |
| `captcha` | ‚úÖ | string | `A1B2C3` | –ö–∞–ø—á–∞ —Å –∫–∞—Ä—Ç–∏–Ω–∫–∏ |

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**

```typescript
interface PatentCheckResult {
  status: 'VALID' | 'ANNULLED' | 'NOT_FOUND' | 'ERROR';
  message: string;
  // –ü—Ä–∏–º–µ—Ä—ã —Å–æ–æ–±—â–µ–Ω–∏–π:
  // "–î–∞–Ω–Ω—ã–π –ø–∞—Ç–µ–Ω—Ç –î–ï–ô–°–¢–í–ò–¢–ï–õ–ï–ù"
  // "–î–∞–Ω–Ω—ã–π –ø–∞—Ç–µ–Ω—Ç –ê–ù–ù–£–õ–ò–†–û–í–ê–ù"
  // "–ü–æ –í–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ"
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚ö†Ô∏è –ï—Å—Ç—å –∫–∞–ø—á–∞ (–Ω—É–∂–µ–Ω —Å–µ—Ä–≤–∏—Å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –∏–ª–∏ —Ä—É—á–Ω–æ–π –≤–≤–æ–¥)
- ‚ö†Ô∏è –ë–∞–∑–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ (–Ω–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏)
- ‚ö†Ô∏è –†–µ–∑—É–ª—å—Ç–∞—Ç –Ω–æ—Å–∏—Ç —Å–ø—Ä–∞–≤–æ—á–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä

---

### 2.2 –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—Ä–µ—Ç–∞ –Ω–∞ –≤—ä–µ–∑–¥

**–ò—Å—Ç–æ—á–Ω–∏–∫:** https://—Å–µ—Ä–≤–∏—Å—ã.–≥—É–≤–º.–º–≤–¥.—Ä—Ñ/info-service.htm?sid=3000

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**

| –ü–æ–ª–µ | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ | –§–æ—Ä–º–∞—Ç | –ü—Ä–∏–º–µ—Ä |
|------|-------------|--------|--------|
| `surname_lat` | ‚úÖ | string (–ª–∞—Ç.) | `IVANOV` |
| `name_lat` | ‚úÖ | string (–ª–∞—Ç.) | `IVAN` |
| `surname_cyr` | ‚ùå | string (–∫–∏—Ä.) | `–ò–í–ê–ù–û–í` |
| `name_cyr` | ‚ùå | string (–∫–∏—Ä.) | `–ò–í–ê–ù` |
| `patronymic_cyr` | ‚ùå | string (–∫–∏—Ä.) | `–ò–í–ê–ù–û–í–ò–ß` |
| `gender` | ‚úÖ | enum | `M` / `F` |
| `birth_date` | ‚úÖ | date | `1990-01-15` |
| `citizenship` | ‚úÖ | enum | `UZB`, `TJK`, `KGZ` |
| `doc_type` | ‚úÖ | enum | —Å–º. –Ω–∏–∂–µ |
| `doc_series` | ‚ùå | string | `AB` |
| `doc_number` | ‚ùå | string | `1234567` |
| `doc_issuer` | ‚ùå | string | `UZB` |
| `doc_valid_until` | ‚ùå | date | `2030-01-15` |
| `captcha` | ‚úÖ | string | `A1B2C3` |

**–¢–∏–ø—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (`doc_type`):**
- `INTERNAL_PASSPORT` ‚Äî –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø–∞—Å–ø–æ—Ä—Ç
- `FOREIGN_PASSPORT` ‚Äî –ó–∞–≥—Ä–∞–Ω–∏—á–Ω—ã–π –ø–∞—Å–ø–æ—Ä—Ç
- `BIOMETRIC_PASSPORT` ‚Äî –ë–∏–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–π –ø–∞—Å–ø–æ—Ä—Ç
- `TRAVEL_DOCUMENT` ‚Äî –ü—Ä–æ–µ–∑–¥–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**

```typescript
interface EntryBanCheckResult {
  hasBan: boolean;
  status: 'NO_BAN' | 'HAS_BAN' | 'NOT_FOUND' | 'ERROR';
  message: string;
  // –ù–ï –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∏—á–∏–Ω—É –∑–∞–ø—Ä–µ—Ç–∞ ‚Äî —Ç–æ–ª—å–∫–æ —Ñ–∞–∫—Ç –Ω–∞–ª–∏—á–∏—è
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚ö†Ô∏è –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∏—á–∏–Ω—É –∑–∞–ø—Ä–µ—Ç–∞
- ‚ö†Ô∏è –î–ª—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ ‚Äî –∑–∞–ø—Ä–æ—Å –≤ –ú–í–î (30 –¥–Ω–µ–π)
- ‚ö†Ô∏è –ï—Å—Ç—å –∫–∞–ø—á–∞

---

### 2.3 –ü–æ–ª—É—á–µ–Ω–∏–µ –ò–ù–ù –ø–æ –ø–∞—Å–ø–æ—Ä—Ç—É

**–ò—Å—Ç–æ—á–Ω–∏–∫:** https://service.nalog.ru/inn.do

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**

| –ü–æ–ª–µ | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ | –§–æ—Ä–º–∞—Ç | –ü—Ä–∏–º–µ—Ä |
|------|-------------|--------|--------|
| `surname` | ‚úÖ | string | `–ò–í–ê–ù–û–í` |
| `name` | ‚úÖ | string | `–ò–í–ê–ù` |
| `patronymic` | ‚ùå | string | `–ò–í–ê–ù–û–í–ò–ß` |
| `birth_date` | ‚úÖ | date | `1990-01-15` |
| `doc_type` | ‚úÖ | enum | —Å–º. –Ω–∏–∂–µ |
| `doc_series` | ‚ùå | string | `AB` |
| `doc_number` | ‚úÖ | string | `1234567` |
| `doc_date` | ‚úÖ | date | `2020-05-20` |
| `captcha` | ‚úÖ | string | `A1B2C3` |

**–ö–æ–¥—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (`doc_type`):**

| –ö–æ–¥ | –¢–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞ |
|-----|---------------|
| `10` | **–ü–∞—Å–ø–æ—Ä—Ç –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω–æ–≥–æ –≥—Ä–∞–∂–¥–∞–Ω–∏–Ω–∞** ‚Üê –æ—Å–Ω–æ–≤–Ω–æ–π –¥–ª—è –º–∏–≥—Ä–∞–Ω—Ç–æ–≤ |
| `12` | –í–∏–¥ –Ω–∞ –∂–∏—Ç–µ–ª—å—Å—Ç–≤–æ –≤ –†–§ |
| `15` | –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏–µ |
| `21` | –ü–∞—Å–ø–æ—Ä—Ç –≥—Ä–∞–∂–¥–∞–Ω–∏–Ω–∞ –†–§ |
| `03` | –°–≤–∏–¥–µ—Ç–µ–ª—å—Å—Ç–≤–æ –æ —Ä–æ–∂–¥–µ–Ω–∏–∏ |

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**

```typescript
interface INNResult {
  found: boolean;
  inn?: string;  // 12 —Ü–∏—Ñ—Ä –¥–ª—è —Ñ–∏–∑. –ª–∏—Ü–∞
  message: string;
  // "–ò–ù–ù: 123456789012"
  // "–ü–æ —É–∫–∞–∑–∞–Ω–Ω—ã–º –¥–∞–Ω–Ω—ã–º –ò–ù–ù –Ω–µ –Ω–∞–π–¥–µ–Ω"
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å –ø–∞—Å–ø–æ—Ä—Ç–æ–º –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω–æ–≥–æ –≥—Ä–∞–∂–¥–∞–Ω–∏–Ω–∞ (–∫–æ–¥ 10)
- ‚ö†Ô∏è –ï—Å—Ç—å –∫–∞–ø—á–∞
- ‚ö†Ô∏è –ù—É–∂–Ω–∞ —Ç–æ—á–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö (–§–ò–û –∫–∞–∫ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ)

---

### 2.4 –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –†–í–ü / –í–ù–ñ / –ì—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–∞

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏:**
- –†–í–ü: https://—Å–µ—Ä–≤–∏—Å—ã.–≥—É–≤–º.–º–≤–¥.—Ä—Ñ/info-service.htm?sid=6000
- –í–ù–ñ: https://—Å–µ—Ä–≤–∏—Å—ã.–≥—É–≤–º.–º–≤–¥.—Ä—Ñ/info-service.htm?sid=7000
- –ì—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–æ: https://—Å–µ—Ä–≤–∏—Å—ã.–≥—É–≤–º.–º–≤–¥.—Ä—Ñ/info-service.htm?sid=8000

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –¥–ª—è –≤—Å–µ—Ö):**

| –ü–æ–ª–µ | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ | –§–æ—Ä–º–∞—Ç | –ü—Ä–∏–º–µ—Ä |
|------|-------------|--------|--------|
| `region` | ‚úÖ | enum | `77` (–ú–æ—Å–∫–≤–∞) |
| `birth_date` | ‚úÖ | date | `1990-01-15` |
| `doc_number` | ‚úÖ | string | `1234567` (—Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã!) |
| `captcha` | ‚úÖ | string | `A1B2C3` |

**–í–∞–∂–Ω–æ:** –í –ø–æ–ª–µ `doc_number` –≤–≤–æ–¥–∏—Ç—å –¢–û–õ–¨–ö–û —Ü–∏—Ñ—Ä—ã –ø–∞—Å–ø–æ—Ä—Ç–∞, –±–µ–∑ –±—É–∫–≤ —Å–µ—Ä–∏–∏!

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**

```typescript
interface ReadinessResult {
  status: 'READY' | 'IN_PROGRESS' | 'NOT_FOUND' | 'ERROR';
  message: string;
  readyDate?: string;
}
```

---

### 2.5 –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å—Ä–æ–∫–æ–≤ –ø—Ä–µ–±—ã–≤–∞–Ω–∏—è (90/180)

**–ò—Å—Ç–æ—á–Ω–∏–∫:** –õ–æ–∫–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞, –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö API

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**

| –ü–æ–ª–µ | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ | –§–æ—Ä–º–∞—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-------------|--------|----------|
| `entries` | ‚úÖ | array | –ò—Å—Ç–æ—Ä–∏—è –≤—ä–µ–∑–¥–æ–≤/–≤—ã–µ–∑–¥–æ–≤ |
| `entries[].type` | ‚úÖ | enum | `ENTRY` / `EXIT` |
| `entries[].date` | ‚úÖ | date | –î–∞—Ç–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –≥—Ä–∞–Ω–∏—Ü—ã |
| `entries[].country` | ‚ùå | string | –°—Ç—Ä–∞–Ω–∞ (–¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏) |

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**

```typescript
interface StayCalculation {
  // –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å
  currentStatus: 'LEGAL' | 'VIOLATION' | 'WARNING';

  // –î–Ω–µ–π –ø—Ä–æ–≤–µ–¥–µ–Ω–æ –≤ –†–§ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 180 –¥–Ω–µ–π
  daysInRussia: number;

  // –°–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –æ—Å—Ç–∞–ª–æ—Å—å –ª–µ–≥–∞–ª—å–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è
  daysRemaining: number;

  // –î–∞—Ç–∞, –¥–æ –∫–æ—Ç–æ—Ä–æ–π –Ω—É–∂–Ω–æ –≤—ã–µ—Ö–∞—Ç—å
  mustLeaveBy: string | null;

  // –ö–æ–≥–¥–∞ –º–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω –≤—ã–µ–∑–¥)
  canReturnAfter: string | null;

  // –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
  warnings: string[];
}
```

**–ü—Ä–∞–≤–∏–ª–∞ —Ä–∞—Å—á—ë—Ç–∞:**
1. –ë–µ–∑–≤–∏–∑–æ–≤—ã–π —Ä–µ–∂–∏–º: 90 –¥–Ω–µ–π –∏–∑ –ª—é–±—ã—Ö 180
2. –û—Ç—Å—á—ë—Ç 180 –¥–Ω–µ–π ‚Äî —Å–∫–æ–ª—å–∑—è—â–µ–µ –æ–∫–Ω–æ
3. –î–µ–Ω—å –≤—ä–µ–∑–¥–∞ –∏ –≤—ã–µ–∑–¥–∞ —Å—á–∏—Ç–∞—é—Ç—Å—è –∫–∞–∫ –ø–æ–ª–Ω—ã–µ –¥–Ω–∏

---

## 3. –ß—Ç–æ –æ—Å—Ç–∞—ë—Ç—Å—è –¥–ª—è –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤

### 3.1 –°–ù–ò–õ–°

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç –ø—É–±–ª–∏—á–Ω–æ–≥–æ API, —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –ï–°–ò–ê (–ì–æ—Å—É—Å–ª—É–≥–∏)

**–í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ—à–µ–Ω–∏—è:**

| –í–∞—Ä–∏–∞–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ | –°—Ç–æ–∏–º–æ—Å—Ç—å |
|---------|----------|-----------|
| **A. –†—É—á–Ω–æ–π –≤–≤–æ–¥** | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –°–ù–ò–õ–° —Å–∞–º | –ë–µ—Å–ø–ª–∞—Ç–Ω–æ |
| **B. OCR** | –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ñ–æ—Ç–æ –°–ù–ò–õ–° | –£–∂–µ –µ—Å—Ç—å |
| **C. –†–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—å** | –†–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—å –æ—Ñ–æ—Ä–º–ª—è–µ—Ç –°–ù–ò–õ–° | –ë–µ—Å–ø–ª–∞—Ç–Ω–æ |
| **D. ESIA Pro** | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –ø–∞—Ä—Ç–Ω—ë—Ä–∞ | ~5.5 –º–ª–Ω —Ä—É–±. |

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –í–∞—Ä–∏–∞–Ω—Ç A + B (—Ä—É—á–Ω–æ–π –≤–≤–æ–¥ + OCR)

---

### 3.2 –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (–º–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —É—á—ë—Ç)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç –æ–Ω–ª–∞–π–Ω-—Å–µ—Ä–≤–∏—Å–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

**–í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ—à–µ–Ω–∏—è:**

| –í–∞—Ä–∏–∞–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| **A. –†—É—á–Ω–æ–π –≤–≤–æ–¥** | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ |
| **B. OCR** | –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –æ—Ç—Ä—ã–≤–Ω–æ–π —á–∞—Å—Ç–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è |
| **C. –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è** | –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ä–æ–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–≤–µ–¥—ë–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö |
| **D. –ü–∞—Ä—Ç–Ω—ë—Ä-–ú–§–¶** | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ú–§–¶ (—Å–ª–æ–∂–Ω–æ, —Ç—Ä–µ–±—É–µ—Ç –¥–æ–≥–æ–≤–æ—Ä–æ–≤) |

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** A + B + C

---

### 3.3 –ú–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –∫–∞—Ä—Ç–∞

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç –æ–Ω–ª–∞–π–Ω-—Å–µ—Ä–≤–∏—Å–∞ (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ú–ö)

**–í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ—à–µ–Ω–∏—è:**

| –í–∞—Ä–∏–∞–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| **A. –†—É—á–Ω–æ–π –≤–≤–æ–¥** | –ù–æ–º–µ—Ä, –¥–∞—Ç–∞ –≤—ä–µ–∑–¥–∞, —Ü–µ–ª—å –≤–∏–∑–∏—Ç–∞ |
| **B. OCR** | –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ñ–æ—Ç–æ –º–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π –∫–∞—Ä—Ç—ã |
| **C. –ö–æ—Å–≤–µ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞** | –ï—Å–ª–∏ –≤—ã–¥–∞–Ω –ø–∞—Ç–µ–Ω—Ç ‚Äî –ú–ö –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞ |

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** A + B + C

---

## 4. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 4.1 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è

```
apps/api-core/src/modules/verification/
‚îú‚îÄ‚îÄ verification.module.ts
‚îú‚îÄ‚îÄ verification.controller.ts
‚îú‚îÄ‚îÄ verification.service.ts
‚îú‚îÄ‚îÄ dto/
‚îÇ   ‚îú‚îÄ‚îÄ check-patent.dto.ts
‚îÇ   ‚îú‚îÄ‚îÄ check-entry-ban.dto.ts
‚îÇ   ‚îú‚îÄ‚îÄ get-inn.dto.ts
‚îÇ   ‚îú‚îÄ‚îÄ check-readiness.dto.ts
‚îÇ   ‚îî‚îÄ‚îÄ calculate-stay.dto.ts
‚îú‚îÄ‚îÄ providers/
‚îÇ   ‚îú‚îÄ‚îÄ mvd.provider.ts          # –ü–∞—Ä—Å–µ—Ä –ì–£–í–ú –ú–í–î
‚îÇ   ‚îú‚îÄ‚îÄ fns.provider.ts          # –ü–∞—Ä—Å–µ—Ä –§–ù–°
‚îÇ   ‚îî‚îÄ‚îÄ captcha.provider.ts      # –†–µ—à–µ–Ω–∏–µ –∫–∞–ø—á–∏
‚îú‚îÄ‚îÄ interfaces/
‚îÇ   ‚îú‚îÄ‚îÄ patent-result.interface.ts
‚îÇ   ‚îú‚îÄ‚îÄ entry-ban-result.interface.ts
‚îÇ   ‚îî‚îÄ‚îÄ inn-result.interface.ts
‚îî‚îÄ‚îÄ __tests__/
    ‚îú‚îÄ‚îÄ mvd.provider.spec.ts
    ‚îî‚îÄ‚îÄ verification.service.spec.ts
```

### 4.2 –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```json
{
  "dependencies": {
    "puppeteer": "^22.0.0",      // –î–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å JS
    "cheerio": "^1.0.0",          // –î–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ HTML
    "axios": "^1.6.0",            // HTTP –∫–ª–∏–µ–Ω—Ç
    "ioredis": "^5.3.0",          // –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
    "2captcha": "^3.0.0"          // –†–µ—à–µ–Ω–∏–µ –∫–∞–ø—á–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  }
}
```

### 4.3 –†–µ—à–µ–Ω–∏–µ –∫–∞–ø—á–∏

**–í–∞—Ä–∏–∞–Ω—Ç—ã:**

| –í–∞—Ä–∏–∞–Ω—Ç | –°—Ç–æ–∏–º–æ—Å—Ç—å | –°–∫–æ—Ä–æ—Å—Ç—å | –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å |
|---------|-----------|----------|------------|
| **2Captcha** | $2.99/1000 | 10-30 —Å–µ–∫ | –í—ã—Å–æ–∫–∞—è |
| **Anti-Captcha** | $2.00/1000 | 10-30 —Å–µ–∫ | –í—ã—Å–æ–∫–∞—è |
| **–†—É—á–Ω–æ–π –≤–≤–æ–¥** | –ë–µ—Å–ø–ª–∞—Ç–Ω–æ | ‚Äî | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç UX |
| **ML –º–æ–¥–µ–ª—å** | –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ | <1 —Å–µ–∫ | –°—Ä–µ–¥–Ω—è—è |

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** 2Captcha –¥–ª—è MVP, –ø–æ—Ç–æ–º —Å–≤–æ—è ML –º–æ–¥–µ–ª—å

### 4.4 –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

```typescript
// –°—Ç—Ä–∞—Ç–µ–≥–∏—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
const CACHE_TTL = {
  patent: 24 * 60 * 60,      // 24 —á–∞—Å–∞
  entryBan: 24 * 60 * 60,    // 24 —á–∞—Å–∞
  inn: 7 * 24 * 60 * 60,     // 7 –¥–Ω–µ–π (–ò–ù–ù –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è)
  readiness: 6 * 60 * 60,    // 6 —á–∞—Å–æ–≤
};
```

---

## 5. API Endpoints

### 5.1 –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ç–µ–Ω—Ç–∞

```
POST /api/v1/verification/patent

Request:
{
  "docSeries": "77",
  "docNumber": "1234567",
  "blankSeries": "0017",
  "blankNumber": "123456",
  "passportNumber": "AB1234567"
}

Response:
{
  "status": "VALID",
  "message": "–ü–∞—Ç–µ–Ω—Ç –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω",
  "checkedAt": "2026-01-29T12:00:00Z",
  "cached": false
}
```

### 5.2 –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—Ä–µ—Ç–∞ –Ω–∞ –≤—ä–µ–∑–¥

```
POST /api/v1/verification/entry-ban

Request:
{
  "surnameLat": "IVANOV",
  "nameLat": "IVAN",
  "surnameCyr": "–ò–í–ê–ù–û–í",
  "nameCyr": "–ò–í–ê–ù",
  "gender": "M",
  "birthDate": "1990-01-15",
  "citizenship": "UZB",
  "docType": "FOREIGN_PASSPORT",
  "docNumber": "AB1234567"
}

Response:
{
  "hasBan": false,
  "status": "NO_BAN",
  "message": "–û—Å–Ω–æ–≤–∞–Ω–∏–π –¥–ª—è –∑–∞–ø—Ä–µ—Ç–∞ –≤—ä–µ–∑–¥–∞ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ",
  "checkedAt": "2026-01-29T12:00:00Z"
}
```

### 5.3 –ü–æ–ª—É—á–µ–Ω–∏–µ –ò–ù–ù

```
POST /api/v1/verification/inn

Request:
{
  "surname": "–ò–í–ê–ù–û–í",
  "name": "–ò–í–ê–ù",
  "patronymic": "–ò–í–ê–ù–û–í–ò–ß",
  "birthDate": "1990-01-15",
  "docType": "10",  // –ü–∞—Å–ø–æ—Ä—Ç –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω–æ–≥–æ –≥—Ä–∞–∂–¥–∞–Ω–∏–Ω–∞
  "docNumber": "AB1234567",
  "docDate": "2020-05-20"
}

Response:
{
  "found": true,
  "inn": "123456789012",
  "checkedAt": "2026-01-29T12:00:00Z"
}
```

### 5.4 –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä 90/180

```
POST /api/v1/verification/stay-calculator

Request:
{
  "entries": [
    { "type": "ENTRY", "date": "2025-10-01" },
    { "type": "EXIT", "date": "2025-12-15" },
    { "type": "ENTRY", "date": "2026-01-10" }
  ]
}

Response:
{
  "currentStatus": "LEGAL",
  "daysInRussia": 95,
  "daysRemaining": 25,
  "mustLeaveBy": "2026-02-23",
  "canReturnAfter": null,
  "warnings": [
    "–û—Å—Ç–∞–ª–æ—Å—å 25 –¥–Ω–µ–π –ª–µ–≥–∞–ª—å–Ω–æ–≥–æ –ø—Ä–µ–±—ã–≤–∞–Ω–∏—è",
    "–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º –≤—ã–µ—Ö–∞—Ç—å –¥–æ 2026-02-20"
  ]
}
```

---

## 6. –û—Ü–µ–Ω–∫–∞ —Ç—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ß–∞—Å—ã | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|-----------|------|-----------|
| –ü–∞—Ä—Å–µ—Ä –ì–£–í–ú –ú–í–î (–ø–∞—Ç–µ–Ω—Ç) | 16 | P0 |
| –ü–∞—Ä—Å–µ—Ä –ì–£–í–ú –ú–í–î (–∑–∞–ø—Ä–µ—Ç) | 12 | P0 |
| –ü–∞—Ä—Å–µ—Ä –§–ù–° (–ò–ù–ù) | 12 | P1 |
| –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä 90/180 | 8 | P0 |
| –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–∞–ø—á–∏ | 8 | P0 |
| –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ Redis | 4 | P0 |
| API endpoints + Swagger | 8 | P0 |
| Unit —Ç–µ—Å—Ç—ã | 12 | P1 |
| Frontend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è | 16 | P1 |
| **–ò—Ç–æ–≥–æ** | **96 —á–∞—Å–æ–≤** | |

---

## 7. –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

| –†–∏—Å–∫ | –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å | –í–ª–∏—è–Ω–∏–µ | –ú–∏—Ç–∏–≥–∞—Ü–∏—è |
|------|-------------|---------|-----------|
| –ò–∑–º–µ–Ω–µ–Ω–∏–µ –≤—ë—Ä—Å—Ç–∫–∏ —Å–∞–π—Ç–æ–≤ –ú–í–î/–§–ù–° | –í—ã—Å–æ–∫–∞—è | –í—ã—Å–æ–∫–æ–µ | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, –∞–ª–µ—Ä—Ç—ã, fallback |
| –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ IP | –°—Ä–µ–¥–Ω—è—è | –í—ã—Å–æ–∫–æ–µ | –†–æ—Ç–∞—Ü–∏—è –ø—Ä–æ–∫—Å–∏, rate limiting |
| –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–∞–ø—á–∏ | –°—Ä–µ–¥–Ω—è—è | –°—Ä–µ–¥–Ω–µ–µ | –ù–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –∫–∞–ø—á–∏ |
| –ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–æ–≤ | –í—ã—Å–æ–∫–∞—è | –°—Ä–µ–¥–Ω–µ–µ | –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, graceful degradation |

---

## 9. –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –û—Ü–µ–Ω–∫–∞ –æ–±—â–µ–π –∑–∞–¥–∞—á–∏

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –§–∞–π–ª–æ–≤ | ~25-30 |
| –°—Ç—Ä–æ–∫ –∫–æ–¥–∞ | ~4000-5000 |
| –ü–æ–¥-–∑–∞–¥–∞—á–∏ | 10 |
| –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ | –î–∞ (Frontend || Backend) |

---

### 9.1 PROMPT: UI —Ä–∞–∑–¥–µ–ª–∞ "–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤" –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ

```
## –ó–∞–¥–∞—á–∞: –î–æ–±–∞–≤–∏—Ç—å —Ä–∞–∑–¥–µ–ª "–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤" –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω

## –ö–æ–Ω—Ç–µ–∫—Å—Ç
- –ü—Ä–æ–µ–∫—Ç: MigrantHub (apps/frontend)
- –°—Ç–µ–∫: Next.js 14, React 18, TypeScript, Tailwind CSS, Zustand
- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω: apps/frontend/src/app/(main)/page.tsx –∏–ª–∏ dashboard
- –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è: 5 —è–∑—ã–∫–æ–≤ (RU, UZ, TJ, KY, EN)
- –î–∏–∑–∞–π–Ω: Mobile-first, iOS/Android —á–µ—Ä–µ–∑ Capacitor

## –¶–µ–ª—å
–°–æ–∑–¥–∞—Ç—å —Ä–∞–∑–¥–µ–ª "–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤" —Å –∫–Ω–æ–ø–∫–∞–º–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏

## UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. –°–µ–∫—Ü–∏—è DocumentVerificationSection
–ö–∞—Ä—Ç–æ—á–∫–∞ –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º –∏ –∫–Ω–æ–ø–∫–∞–º–∏:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤                 ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  ‚úì –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö         ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ    –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤                    ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê             ‚îÇ
‚îÇ  ‚îÇ –ü–∞—Ç–µ–Ω—Ç   ‚îÇ ‚îÇ –ó–∞–ø—Ä–µ—Ç   ‚îÇ             ‚îÇ
‚îÇ  ‚îÇ          ‚îÇ ‚îÇ –≤—ä–µ–∑–¥–∞   ‚îÇ             ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê             ‚îÇ
‚îÇ  ‚îÇ –ò–ù–ù      ‚îÇ ‚îÇ 90/180   ‚îÇ             ‚îÇ
‚îÇ  ‚îÇ          ‚îÇ ‚îÇ          ‚îÇ             ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê             ‚îÇ
‚îÇ  ‚îÇ –†–í–ü      ‚îÇ ‚îÇ –í–ù–ñ      ‚îÇ             ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 2. –¢–∏–ø—ã –∫–Ω–æ–ø–æ–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏

| ID | –ù–∞–∑–≤–∞–Ω–∏–µ (RU) | –ò–∫–æ–Ω–∫–∞ | –¢—Ä–µ–±—É–µ—Ç –¥–∞–Ω–Ω—ã—Ö |
|----|---------------|--------|----------------|
| `patent` | –ü–∞—Ç–µ–Ω—Ç | üìã | –î–∞ (–ø–∞—Ç–µ–Ω—Ç –≤ –ø—Ä–æ—Ñ–∏–ª–µ) |
| `entry-ban` | –ó–∞–ø—Ä–µ—Ç –≤—ä–µ–∑–¥–∞ | üö´ | –î–∞ (–ø–∞—Å–ø–æ—Ä—Ç –≤ –ø—Ä–æ—Ñ–∏–ª–µ) |
| `inn` | –ò–ù–ù | üî¢ | –î–∞ (–ø–∞—Å–ø–æ—Ä—Ç –≤ –ø—Ä–æ—Ñ–∏–ª–µ) |
| `stay-calc` | –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä 90/180 | üìÖ | –î–∞ (–¥–∞—Ç—ã –≤—ä–µ–∑–¥–∞/–≤—ã–µ–∑–¥–∞) |
| `rvp-status` | –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –†–í–ü | ‚è≥ | –î–∞ (–Ω–æ–º–µ—Ä –∑–∞—è–≤–ª–µ–Ω–∏—è) |
| `vnj-status` | –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –í–ù–ñ | ‚è≥ | –î–∞ (–Ω–æ–º–µ—Ä –∑–∞—è–≤–ª–µ–Ω–∏—è) |
| `citizenship` | –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –≥—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–∞ | üá∑üá∫ | –î–∞ (–Ω–æ–º–µ—Ä –∑–∞—è–≤–ª–µ–Ω–∏—è) |

### 3. –°–æ—Å—Ç–æ—è–Ω–∏—è –∫–Ω–æ–ø–æ–∫
- `idle` ‚Äî –æ–±—ã—á–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- `loading` ‚Äî –∏–¥—ë—Ç –ø—Ä–æ–≤–µ—Ä–∫–∞ (—Å–ø–∏–Ω–Ω–µ—Ä)
- `success` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ (–∑–µ–ª—ë–Ω–∞—è –≥–∞–ª–æ—á–∫–∞)
- `warning` ‚Äî —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è (–∂—ë–ª—Ç—ã–π)
- `error` ‚Äî –ø—Ä–æ–±–ª–µ–º–∞ –Ω–∞–π–¥–µ–Ω–∞ (–∫—Ä–∞—Å–Ω—ã–π)
- `disabled` ‚Äî –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ (—Å–µ—Ä—ã–π + —Ç—É–ª—Ç–∏–ø)

## –®–∞–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `DocumentVerificationSection.tsx`
2. –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `VerificationButton.tsx` (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π)
3. –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `FullVerificationButton.tsx`
4. –î–æ–±–∞–≤–∏—Ç—å —Ö—É–∫ `useDocumentVerification.ts`
5. –î–æ–±–∞–≤–∏—Ç—å store `verificationStore.ts` (Zustand)
6. –î–æ–±–∞–≤–∏—Ç—å –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—é –≤ `locales/*/verification.json`
7. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–µ–∫—Ü–∏—é –≤ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω

## –§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è

apps/frontend/src/
‚îú‚îÄ‚îÄ features/verification/
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DocumentVerificationSection.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ VerificationButton.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ FullVerificationButton.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ VerificationResultModal.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îÇ   ‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ useDocumentVerification.ts
‚îÇ   ‚îú‚îÄ‚îÄ store/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ verificationStore.ts
‚îÇ   ‚îú‚îÄ‚îÄ types/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ verification.types.ts
‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îú‚îÄ‚îÄ locales/
‚îÇ   ‚îú‚îÄ‚îÄ ru/verification.json
‚îÇ   ‚îú‚îÄ‚îÄ uz/verification.json
‚îÇ   ‚îú‚îÄ‚îÄ tj/verification.json
‚îÇ   ‚îú‚îÄ‚îÄ ky/verification.json
‚îÇ   ‚îî‚îÄ‚îÄ en/verification.json

## –§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è

- apps/frontend/src/app/(main)/page.tsx ‚Äî –¥–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ü–∏—é
- apps/frontend/src/lib/api/client.ts ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã API

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
- [ ] –°–µ–∫—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ
- [ ] –í—Å–µ 7 –∫–Ω–æ–ø–æ–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç
- [ ] –ö–Ω–æ–ø–∫–∞ "–ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞" —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –°–æ—Å—Ç–æ—è–Ω–∏—è –∫–Ω–æ–ø–æ–∫ –º–µ–Ω—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –≤—Å–µ—Ö 5 —è–∑—ã–∫–∞—Ö
- [ ] –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω (mobile + tablet)
- [ ] –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å (ARIA labels, keyboard nav)
- [ ] –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏

## –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
npm run dev ‚Äî –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∏–∑—É–∞–ª—å–Ω–æ –Ω–∞ –≤—Å–µ—Ö —Ä–∞–∑–º–µ—Ä–∞—Ö —ç–∫—Ä–∞–Ω–∞
npm run lint ‚Äî –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥
```

---

### 9.2 PROMPT: Backend ‚Äî –ú–æ–¥—É–ª—å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–±–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)

```
## –ó–∞–¥–∞—á–∞: –°–æ–∑–¥–∞—Ç—å –º–æ–¥—É–ª—å verification –≤ api-core

## –ö–æ–Ω—Ç–µ–∫—Å—Ç
- –ü—Ä–æ–µ–∫—Ç: MigrantHub (apps/api-core)
- –°—Ç–µ–∫: NestJS 10, TypeScript, Redis, class-validator
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–æ–¥—É–ª–∏: auth, users, health
- –ë–∞–∑–∞: PostgreSQL 16 + TypeORM

## –¶–µ–ª—å
–°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –º–æ–¥—É–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è

apps/api-core/src/modules/verification/
‚îú‚îÄ‚îÄ verification.module.ts
‚îú‚îÄ‚îÄ verification.controller.ts
‚îú‚îÄ‚îÄ verification.service.ts
‚îú‚îÄ‚îÄ dto/
‚îÇ   ‚îú‚îÄ‚îÄ check-patent.dto.ts
‚îÇ   ‚îú‚îÄ‚îÄ check-entry-ban.dto.ts
‚îÇ   ‚îú‚îÄ‚îÄ get-inn.dto.ts
‚îÇ   ‚îú‚îÄ‚îÄ check-readiness.dto.ts
‚îÇ   ‚îú‚îÄ‚îÄ calculate-stay.dto.ts
‚îÇ   ‚îî‚îÄ‚îÄ full-verification.dto.ts
‚îú‚îÄ‚îÄ interfaces/
‚îÇ   ‚îú‚îÄ‚îÄ verification-result.interface.ts
‚îÇ   ‚îú‚îÄ‚îÄ patent-result.interface.ts
‚îÇ   ‚îú‚îÄ‚îÄ entry-ban-result.interface.ts
‚îÇ   ‚îú‚îÄ‚îÄ inn-result.interface.ts
‚îÇ   ‚îî‚îÄ‚îÄ stay-calculation.interface.ts
‚îú‚îÄ‚îÄ providers/
‚îÇ   ‚îú‚îÄ‚îÄ mvd.provider.ts
‚îÇ   ‚îú‚îÄ‚îÄ fns.provider.ts
‚îÇ   ‚îú‚îÄ‚îÄ captcha.provider.ts
‚îÇ   ‚îî‚îÄ‚îÄ cache.provider.ts
‚îú‚îÄ‚îÄ enums/
‚îÇ   ‚îú‚îÄ‚îÄ verification-status.enum.ts
‚îÇ   ‚îú‚îÄ‚îÄ document-type.enum.ts
‚îÇ   ‚îî‚îÄ‚îÄ citizenship.enum.ts
‚îî‚îÄ‚îÄ __tests__/
    ‚îú‚îÄ‚îÄ verification.controller.spec.ts
    ‚îî‚îÄ‚îÄ verification.service.spec.ts

## API Endpoints

| Method | Path | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|------|----------|
| POST | /api/v1/verification/patent | –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ç–µ–Ω—Ç–∞ |
| POST | /api/v1/verification/entry-ban | –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—Ä–µ—Ç–∞ –Ω–∞ –≤—ä–µ–∑–¥ |
| POST | /api/v1/verification/inn | –ü–æ–ª—É—á–µ–Ω–∏–µ –ò–ù–ù |
| POST | /api/v1/verification/stay-calculator | –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä 90/180 |
| POST | /api/v1/verification/rvp-status | –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –†–í–ü |
| POST | /api/v1/verification/vnj-status | –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –í–ù–ñ |
| POST | /api/v1/verification/citizenship-status | –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –≥—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–∞ |
| POST | /api/v1/verification/full | –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ |

## –®–∞–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫ –º–æ–¥—É–ª—è
2. –°–æ–∑–¥–∞—Ç—å enums (—Å—Ç–∞—Ç—É—Å—ã, —Ç–∏–ø—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –≥—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–∞)
3. –°–æ–∑–¥–∞—Ç—å interfaces –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
4. –°–æ–∑–¥–∞—Ç—å DTOs —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π (class-validator)
5. –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–µ providers (–∑–∞–≥–ª—É—à–∫–∏)
6. –°–æ–∑–¥–∞—Ç—å verification.service.ts
7. –°–æ–∑–¥–∞—Ç—å verification.controller.ts
8. –°–æ–∑–¥–∞—Ç—å verification.module.ts
9. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥—É–ª—å –≤ app.module.ts
10. –î–æ–±–∞–≤–∏—Ç—å Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
- [ ] –ú–æ–¥—É–ª—å —Å–æ–∑–¥–∞–Ω –∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
- [ ] –í—Å–µ endpoints –¥–æ—Å—Ç—É–ø–Ω—ã (–≤–æ–∑–≤—Ä–∞—â–∞—é—Ç mock –¥–∞–Ω–Ω—ã–µ)
- [ ] DTOs –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- [ ] Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∞
- [ ] –ë–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] TypeScript –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

## –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
npm run build ‚Äî –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–º–ø–∏–ª—è—Ü–∏—é
npm run test -- --filter=verification
curl http://localhost:3000/api/v1/verification/patent -X POST
```

---

### 9.3 PROMPT: Backend ‚Äî –ü–∞—Ä—Å–µ—Ä –ì–£–í–ú –ú–í–î (–ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ç–µ–Ω—Ç–∞)

```
## –ó–∞–¥–∞—á–∞: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–∞—Ä—Å–µ—Ä –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–∞—Ç–µ–Ω—Ç–∞ –Ω–∞ —Å–∞–π—Ç–µ –ì–£–í–ú –ú–í–î

## –ö–æ–Ω—Ç–µ–∫—Å—Ç
- –ú–æ–¥—É–ª—å: apps/api-core/src/modules/verification/
- URL: https://—Å–µ—Ä–≤–∏—Å—ã.–≥—É–≤–º.–º–≤–¥.—Ä—Ñ/info-service.htm?sid=2000
- –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å: –ì–û–°–¢-TLS —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç, –∫–∞–ø—á–∞, JS-—Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥

## –¶–µ–ª—å
–°–æ–∑–¥–∞—Ç—å provider –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–∞—Ç–µ–Ω—Ç–∞ —á–µ—Ä–µ–∑ –ø–∞—Ä—Å–∏–Ω–≥ —Å–∞–π—Ç–∞ –ú–í–î

## –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–∏–∑ DTO)

```typescript
interface CheckPatentDto {
  docSeries: string;      // –°–µ—Ä–∏—è –ø–∞—Ç–µ–Ω—Ç–∞ (77)
  docNumber: string;      // –ù–æ–º–µ—Ä –ø–∞—Ç–µ–Ω—Ç–∞ (1234567)
  blankSeries: string;    // –°–µ—Ä–∏—è –±–ª–∞–Ω–∫–∞ (0017)
  blankNumber: string;    // –ù–æ–º–µ—Ä –±–ª–∞–Ω–∫–∞ (123456)
  passportNumber: string; // –ù–æ–º–µ—Ä –ø–∞—Å–ø–æ—Ä—Ç–∞ (AB1234567)
}
```

## –í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

```typescript
interface PatentCheckResult {
  status: 'VALID' | 'ANNULLED' | 'NOT_FOUND' | 'ERROR';
  message: string;
  rawResponse?: string;
  checkedAt: Date;
  cached: boolean;
}
```

## –®–∞–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   - puppeteer (–¥–ª—è JS-—Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞)
   - puppeteer-extra + stealth plugin (–∞–Ω—Ç–∏-–¥–µ—Ç–µ–∫—Ç)
   - 2captcha (—Ä–µ—à–µ–Ω–∏–µ –∫–∞–ø—á–∏)

2. –°–æ–∑–¥–∞—Ç—å MvdProvider:
   ```typescript
   @Injectable()
   class MvdProvider {
     async checkPatent(dto: CheckPatentDto): Promise<PatentCheckResult>;
     private async solveCaptcha(imageBase64: string): Promise<string>;
     private async parseResponse(html: string): PatentCheckResult;
   }
   ```

3. –õ–æ–≥–∏–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞:
   - –û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ headless –±—Ä–∞—É–∑–µ—Ä–µ
   - –í—ã–±—Ä–∞—Ç—å "–í–∏–¥ —Å–µ—Ä–≤–∏—Å–∞" = "–ü–ê–¢–ï–ù–¢"
   - –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É
   - –ü–æ–ª—É—á–∏—Ç—å –∫–∞–ø—á—É, –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ 2Captcha
   - –í–≤–µ—Å—Ç–∏ —Ä–µ—à–µ–Ω–∏–µ –∫–∞–ø—á–∏
   - –ù–∞–∂–∞—Ç—å "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å"
   - –î–æ–∂–¥–∞—Ç—å—Å—è –æ—Ç–≤–µ—Ç–∞
   - –†–∞—Å–ø–∞—Ä—Å–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç

4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤:
   - "–î–∞–Ω–Ω—ã–π –ø–∞—Ç–µ–Ω—Ç –î–ï–ô–°–¢–í–ò–¢–ï–õ–ï–ù" ‚Üí VALID
   - "–î–∞–Ω–Ω—ã–π –ø–∞—Ç–µ–Ω—Ç –ê–ù–ù–£–õ–ò–†–û–í–ê–ù" ‚Üí ANNULLED
   - "–ü–æ –í–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ" ‚Üí NOT_FOUND
   - –û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è ‚Üí ERROR

5. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:
   - –ö–ª—é—á: `patent:${docSeries}:${docNumber}`
   - TTL: 24 —á–∞—Å–∞
   - –ü—Ä–æ–≤–µ—Ä—è—Ç—å –∫—ç—à –ø–µ—Ä–µ–¥ –∑–∞–ø—Ä–æ—Å–æ–º

## –§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/–∏–∑–º–µ–Ω–µ–Ω–∏—è

- apps/api-core/src/modules/verification/providers/mvd.provider.ts
- apps/api-core/src/modules/verification/providers/captcha.provider.ts
- apps/api-core/package.json (–¥–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏)

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```env
CAPTCHA_API_KEY=your_2captcha_api_key
MVD_REQUEST_TIMEOUT=60000
MVD_MAX_RETRIES=3
```

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
- [ ] –ü–∞—Ä—Å–µ—Ä —É—Å–ø–µ—à–Ω–æ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É –ú–í–î
- [ ] –ö–∞–ø—á–∞ —Ä–µ—à–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ 2Captcha
- [ ] –§–æ—Ä–º–∞ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–∞—Ä—Å–∏—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (—Ç–∞–π–º–∞—É—Ç, –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å)
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤

## –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –ø–∞—Ç–µ–Ω—Ç–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)
```

---

### 9.4 PROMPT: Backend ‚Äî –ü–∞—Ä—Å–µ—Ä –ì–£–í–ú –ú–í–î (–ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—Ä–µ—Ç–∞ –Ω–∞ –≤—ä–µ–∑–¥)

```
## –ó–∞–¥–∞—á–∞: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–∞—Ä—Å–µ—Ä –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–ø—Ä–µ—Ç–∞ –Ω–∞ –≤—ä–µ–∑–¥

## –ö–æ–Ω—Ç–µ–∫—Å—Ç
- –ú–æ–¥—É–ª—å: apps/api-core/src/modules/verification/
- URL: https://—Å–µ—Ä–≤–∏—Å—ã.–≥—É–≤–º.–º–≤–¥.—Ä—Ñ/info-service.htm?sid=3000
- –ë–∞–∑–∏—Ä—É–µ—Ç—Å—è –Ω–∞ MvdProvider –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –∑–∞–¥–∞—á–∏

## –¶–µ–ª—å
–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–ø—Ä–µ—Ç–∞ –Ω–∞ –≤—ä–µ–∑–¥ –≤ MvdProvider

## –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

```typescript
interface CheckEntryBanDto {
  surnameLat: string;     // IVANOV
  nameLat: string;        // IVAN
  surnameCyr?: string;    // –ò–í–ê–ù–û–í
  nameCyr?: string;       // –ò–í–ê–ù
  patronymicCyr?: string; // –ò–í–ê–ù–û–í–ò–ß
  gender: 'M' | 'F';
  birthDate: string;      // 1990-01-15
  citizenship: string;    // UZB, TJK, KGZ
  docType: DocumentType;  // FOREIGN_PASSPORT
  docSeries?: string;
  docNumber?: string;
  docIssuer?: string;
  docValidUntil?: string;
}

enum DocumentType {
  INTERNAL_PASSPORT = 'INTERNAL_PASSPORT',
  FOREIGN_PASSPORT = 'FOREIGN_PASSPORT',
  BIOMETRIC_PASSPORT = 'BIOMETRIC_PASSPORT',
  TRAVEL_DOCUMENT = 'TRAVEL_DOCUMENT',
}

enum Citizenship {
  UZB = 'UZB',  // –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω
  TJK = 'TJK',  // –¢–∞–¥–∂–∏–∫–∏—Å—Ç–∞–Ω
  KGZ = 'KGZ',  // –ö—ã—Ä–≥—ã–∑—Å—Ç–∞–Ω
  KAZ = 'KAZ',  // –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω
  ARM = 'ARM',  // –ê—Ä–º–µ–Ω–∏—è
  AZE = 'AZE',  // –ê–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω
  // ... –¥—Ä—É–≥–∏–µ
}
```

## –í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

```typescript
interface EntryBanCheckResult {
  hasBan: boolean;
  status: 'NO_BAN' | 'HAS_BAN' | 'NOT_FOUND' | 'ERROR';
  message: string;
  checkedAt: Date;
  cached: boolean;
}
```

## –®–∞–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ `checkEntryBan()` –≤ MvdProvider
2. –ú–∞–ø–ø–∏–Ω–≥ citizenship –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏—è —Ñ–æ—Ä–º—ã –ú–í–î
3. –ú–∞–ø–ø–∏–Ω–≥ docType –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏—è —Ñ–æ—Ä–º—ã –ú–í–î
4. –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã (–±–æ–ª—å—à–µ –ø–æ–ª–µ–π —á–µ–º —É –ø–∞—Ç–µ–Ω—Ç–∞)
5. –ü–∞—Ä—Å–∏–Ω–≥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:
   - –¢–µ–∫—Å—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç "–æ—Å–Ω–æ–≤–∞–Ω–∏–π –Ω–µ –∏–º–µ–µ—Ç—Å—è" ‚Üí NO_BAN
   - –¢–µ–∫—Å—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç "–∏–º–µ—é—Ç—Å—è –æ—Å–Ω–æ–≤–∞–Ω–∏—è" ‚Üí HAS_BAN
   - "–Ω–µ –Ω–∞–π–¥–µ–Ω–æ" ‚Üí NOT_FOUND

6. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:
   - –ö–ª—é—á: `entry-ban:${surnameLat}:${birthDate}`
   - TTL: 24 —á–∞—Å–∞

## –§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è

- apps/api-core/src/modules/verification/providers/mvd.provider.ts
- apps/api-core/src/modules/verification/enums/citizenship.enum.ts
- apps/api-core/src/modules/verification/enums/document-type.enum.ts

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
- [ ] –§–æ—Ä–º–∞ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤—Å–µ–º–∏ –ø–æ–ª—è–º–∏
- [ ] –ú–∞–ø–ø–∏–Ω–≥ –≥—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ú–∞–ø–ø–∏–Ω–≥ —Ç–∏–ø–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–∞—Ä—Å–∏—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

## –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
```

---

### 9.5 PROMPT: Backend ‚Äî –ü–∞—Ä—Å–µ—Ä –§–ù–° (–ø–æ–ª—É—á–µ–Ω–∏–µ –ò–ù–ù)

```
## –ó–∞–¥–∞—á–∞: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–∞—Ä—Å–µ—Ä –ø–æ–ª—É—á–µ–Ω–∏—è –ò–ù–ù –Ω–∞ —Å–∞–π—Ç–µ –§–ù–°

## –ö–æ–Ω—Ç–µ–∫—Å—Ç
- –ú–æ–¥—É–ª—å: apps/api-core/src/modules/verification/
- URL: https://service.nalog.ru/inn.do
- –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å: –∫–∞–ø—á–∞, —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø–∞—Å–ø–æ—Ä—Ç–æ–º –∏–Ω–æ—Å—Ç—Ä–∞–Ω—Ü–∞ (–∫–æ–¥ 10)

## –¶–µ–ª—å
–°–æ–∑–¥–∞—Ç—å FnsProvider –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ò–ù–ù –ø–æ –ø–∞—Å–ø–æ—Ä—Ç–Ω—ã–º –¥–∞–Ω–Ω—ã–º

## –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

```typescript
interface GetInnDto {
  surname: string;      // –ò–í–ê–ù–û–í
  name: string;         // –ò–í–ê–ù
  patronymic?: string;  // –ò–í–ê–ù–û–í–ò–ß
  birthDate: string;    // 1990-01-15
  docType: string;      // "10" = –ø–∞—Å–ø–æ—Ä—Ç –∏–Ω–æ—Å—Ç—Ä–∞–Ω—Ü–∞
  docSeries?: string;   // AB (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  docNumber: string;    // 1234567
  docDate: string;      // 2020-05-20 (–¥–∞—Ç–∞ –≤—ã–¥–∞—á–∏)
}
```

## –ö–æ–¥—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

```typescript
enum FnsDocumentType {
  FOREIGN_PASSPORT = '10',      // –ü–∞—Å–ø–æ—Ä—Ç –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω–æ–≥–æ –≥—Ä–∞–∂–¥–∞–Ω–∏–Ω–∞
  RESIDENCE_PERMIT = '12',      // –í–∏–¥ –Ω–∞ –∂–∏—Ç–µ–ª—å—Å—Ç–≤–æ
  TEMPORARY_RESIDENCE = '15',   // –†–í–ü
  RF_PASSPORT = '21',           // –ü–∞—Å–ø–æ—Ä—Ç –†–§
  BIRTH_CERTIFICATE = '03',     // –°–≤–∏–¥–µ—Ç–µ–ª—å—Å—Ç–≤–æ –æ —Ä–æ–∂–¥–µ–Ω–∏–∏
}
```

## –í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

```typescript
interface InnResult {
  found: boolean;
  inn?: string;  // 12 —Ü–∏—Ñ—Ä
  message: string;
  checkedAt: Date;
  cached: boolean;
}
```

## –®–∞–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. –°–æ–∑–¥–∞—Ç—å FnsProvider:
   ```typescript
   @Injectable()
   class FnsProvider {
     async getInn(dto: GetInnDto): Promise<InnResult>;
     private async solveCaptcha(imageBase64: string): Promise<string>;
   }
   ```

2. –õ–æ–≥–∏–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞:
   - POST –∑–∞–ø—Ä–æ—Å –Ω–∞ https://service.nalog.ru/inn-proc.do
   - –ò–ª–∏ —á–µ—Ä–µ–∑ Puppeteer –µ—Å–ª–∏ –Ω—É–∂–µ–Ω JS
   - –ü–æ–ª—É—á–∏—Ç—å –∫–∞–ø—á—É
   - –†–µ—à–∏—Ç—å —á–µ—Ä–µ–∑ 2Captcha
   - –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ä–º—É
   - –†–∞—Å–ø–∞—Ä—Å–∏—Ç—å –æ—Ç–≤–µ—Ç

3. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:
   - –ö–ª—é—á: `inn:${surname}:${birthDate}:${docNumber}`
   - TTL: 7 –¥–Ω–µ–π (–ò–ù–ù –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è)

## –§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è

- apps/api-core/src/modules/verification/providers/fns.provider.ts
- apps/api-core/src/modules/verification/enums/fns-document-type.enum.ts

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
- [ ] –ó–∞–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ö–∞–ø—á–∞ —Ä–µ—à–∞–µ—Ç—Å—è
- [ ] –ò–ù–ù –ø–∞—Ä—Å–∏—Ç—Å—è –∏–∑ –æ—Ç–≤–µ—Ç–∞
- [ ] –†–∞–±–æ—Ç–∞–µ—Ç —Å –ø–∞—Å–ø–æ—Ä—Ç–æ–º –∏–Ω–æ—Å—Ç—Ä–∞–Ω—Ü–∞ (–∫–æ–¥ 10)
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ "–ò–ù–ù –Ω–µ –Ω–∞–π–¥–µ–Ω"

## –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)
```

---

### 9.6 PROMPT: Backend ‚Äî –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä 90/180

```
## –ó–∞–¥–∞—á–∞: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å—Ä–æ–∫–æ–≤ –ø—Ä–µ–±—ã–≤–∞–Ω–∏—è 90/180

## –ö–æ–Ω—Ç–µ–∫—Å—Ç
- –ú–æ–¥—É–ª—å: apps/api-core/src/modules/verification/
- –ù–ï —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–µ—à–Ω–∏—Ö API ‚Äî —á–∏—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞
- –ü—Ä–∞–≤–∏–ª–æ: 90 –¥–Ω–µ–π –∏–∑ –ª—é–±—ã—Ö 180 (–±–µ–∑–≤–∏–∑–æ–≤—ã–π —Ä–µ–∂–∏–º)

## –¶–µ–ª—å
–°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å —Ä–∞—Å—á—ë—Ç–∞ –ª–µ–≥–∞–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–µ–±—ã–≤–∞–Ω–∏—è –≤ –†–§

## –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

```typescript
interface CalculateStayDto {
  entries: BorderCrossing[];
  currentDate?: string;  // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é = —Å–µ–≥–æ–¥–Ω—è
}

interface BorderCrossing {
  type: 'ENTRY' | 'EXIT';
  date: string;  // ISO date
  country?: string;
}
```

## –í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

```typescript
interface StayCalculation {
  currentStatus: 'LEGAL' | 'VIOLATION' | 'WARNING';
  daysInRussia: number;      // –ó–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 180 –¥–Ω–µ–π
  daysRemaining: number;     // –°–∫–æ–ª—å–∫–æ –º–æ–∂–Ω–æ –µ—â—ë
  mustLeaveBy: string | null;
  canReturnAfter: string | null;
  currentStayDays: number;   // –¢–µ–∫—É—â–∏–π –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π –ø–µ—Ä–∏–æ–¥
  warnings: string[];
  timeline: StayPeriod[];
}

interface StayPeriod {
  start: string;
  end: string | null;
  days: number;
  countsToward180: boolean;
}
```

## –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞—Å—á—ë—Ç–∞

1. **90/180**: –ò–Ω–æ—Å—Ç—Ä–∞–Ω–µ—Ü –º–æ–∂–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –†–§ 90 –¥–Ω–µ–π –∏–∑ –ª—é–±—ã—Ö 180
2. **–°–∫–æ–ª—å–∑—è—â–µ–µ –æ–∫–Ω–æ**: –°–º–æ—Ç—Ä–∏–º 180 –¥–Ω–µ–π –Ω–∞–∑–∞–¥ –æ—Ç —Ç–µ–∫—É—â–µ–π –¥–∞—Ç—ã
3. **–ü–æ–¥—Å—á—ë—Ç –¥–Ω–µ–π**:
   - –î–µ–Ω—å –≤—ä–µ–∑–¥–∞ = —Å—á–∏—Ç–∞–µ—Ç—Å—è
   - –î–µ–Ω—å –≤—ã–µ–∑–¥–∞ = —Å—á–∏—Ç–∞–µ—Ç—Å—è
   - –ü–µ—Ä–∏–æ–¥—ã –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –†–§ = –Ω–µ —Å—á–∏—Ç–∞—é—Ç—Å—è
4. **–°—Ç–∞—Ç—É—Å—ã**:
   - LEGAL: daysInRussia <= 90
   - WARNING: daysInRussia >= 80 (–æ—Å—Ç–∞–ª–æ—Å—å <= 10 –¥–Ω–µ–π)
   - VIOLATION: daysInRussia > 90

## –®–∞–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. –°–æ–∑–¥–∞—Ç—å StayCalculatorService:
   ```typescript
   @Injectable()
   class StayCalculatorService {
     calculate(dto: CalculateStayDto): StayCalculation;
     private buildTimeline(entries: BorderCrossing[]): StayPeriod[];
     private countDaysInWindow(timeline: StayPeriod[], windowEnd: Date): number;
   }
   ```

2. –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:
   - –î–∞—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã–º–∏
   - –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å ENTRY/EXIT –¥–æ–ª–∂–Ω–∞ —á–µ—Ä–µ–¥–æ–≤–∞—Ç—å—Å—è
   - –ü–µ—Ä–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å ENTRY

3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π:
   - "–û—Å—Ç–∞–ª–æ—Å—å X –¥–Ω–µ–π –ª–µ–≥–∞–ª—å–Ω–æ–≥–æ –ø—Ä–µ–±—ã–≤–∞–Ω–∏—è"
   - "–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º –≤—ã–µ—Ö–∞—Ç—å –¥–æ DATE"
   - "–ú–æ–∂–µ—Ç–µ –≤–µ—Ä–Ω—É—Ç—å—Å—è –ø–æ—Å–ª–µ DATE"
   - "–ü—Ä–µ–≤—ã—à–µ–Ω —Å—Ä–æ–∫ –ø—Ä–µ–±—ã–≤–∞–Ω–∏—è –Ω–∞ X –¥–Ω–µ–π!"

## –§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è

- apps/api-core/src/modules/verification/services/stay-calculator.service.ts
- apps/api-core/src/modules/verification/dto/calculate-stay.dto.ts

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
- [ ] –†–∞—Å—á—ë—Ç –¥–Ω–µ–π –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω
- [ ] –°–∫–æ–ª—å–∑—è—â–µ–µ –æ–∫–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –°—Ç–∞—Ç—É—Å—ã –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –≤–µ—Ä–Ω–æ
- [ ] –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- [ ] Unit —Ç–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç edge cases

## –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
npm run test -- --filter=stay-calculator
```

---

### 9.7 PROMPT: Backend ‚Äî –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –†–í–ü/–í–ù–ñ/–ì—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–∞

```
## –ó–∞–¥–∞—á–∞: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–∞—Ä—Å–µ—Ä –ø—Ä–æ–≤–µ—Ä–∫–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –†–í–ü, –í–ù–ñ, –≥—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–∞

## –ö–æ–Ω—Ç–µ–∫—Å—Ç
- –ú–æ–¥—É–ª—å: apps/api-core/src/modules/verification/
- URLs:
  - –†–í–ü: https://—Å–µ—Ä–≤–∏—Å—ã.–≥—É–≤–º.–º–≤–¥.—Ä—Ñ/info-service.htm?sid=6000
  - –í–ù–ñ: https://—Å–µ—Ä–≤–∏—Å—ã.–≥—É–≤–º.–º–≤–¥.—Ä—Ñ/info-service.htm?sid=7000
  - –ì—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–æ: https://—Å–µ—Ä–≤–∏—Å—ã.–≥—É–≤–º.–º–≤–¥.—Ä—Ñ/info-service.htm?sid=8000

## –¶–µ–ª—å
–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –≤ MvdProvider

## –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –¥–ª—è –≤—Å–µ—Ö)

```typescript
interface CheckReadinessDto {
  type: 'RVP' | 'VNJ' | 'CITIZENSHIP';
  region: string;         // –ö–æ–¥ —Ä–µ–≥–∏–æ–Ω–∞ (77 = –ú–æ—Å–∫–≤–∞)
  birthDate: string;      // 1990-01-15
  docNumber: string;      // –¢–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã –ø–∞—Å–ø–æ—Ä—Ç–∞!
}
```

## –ö–æ–¥—ã —Ä–µ–≥–∏–æ–Ω–æ–≤ (—Ç–æ–ø –¥–ª—è –º–∏–≥—Ä–∞–Ω—Ç–æ–≤)

```typescript
const REGIONS = {
  '77': '–ú–æ—Å–∫–≤–∞',
  '50': '–ú–æ—Å–∫–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å',
  '78': '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥',
  '47': '–õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å',
  '23': '–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π',
  '61': '–†–æ—Å—Ç–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å',
  '54': '–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å',
  // ... –≤—Å–µ —Ä–µ–≥–∏–æ–Ω—ã –†–§
};
```

## –í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

```typescript
interface ReadinessResult {
  status: 'READY' | 'IN_PROGRESS' | 'NOT_FOUND' | 'ERROR';
  message: string;
  readyDate?: string;
  checkedAt: Date;
  cached: boolean;
}
```

## –®–∞–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã –≤ MvdProvider:
   ```typescript
   async checkRvpReadiness(dto: CheckReadinessDto): Promise<ReadinessResult>;
   async checkVnjReadiness(dto: CheckReadinessDto): Promise<ReadinessResult>;
   async checkCitizenshipReadiness(dto: CheckReadinessDto): Promise<ReadinessResult>;
   ```

2. –û–±—â–∏–π –º–µ—Ç–æ–¥ `checkReadiness(type, dto)` —Å —Ä–∞–∑–Ω—ã–º–∏ sid

3. –ü–∞—Ä—Å–∏–Ω–≥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:
   - "–≥–æ—Ç–æ–≤" / "ready" ‚Üí READY
   - "–≤ –ø—Ä–æ—Ü–µ—Å—Å–µ" / "—Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç—Å—è" ‚Üí IN_PROGRESS
   - "–Ω–µ –Ω–∞–π–¥–µ–Ω–æ" ‚Üí NOT_FOUND

4. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:
   - TTL: 6 —á–∞—Å–æ–≤ (—Å—Ç–∞—Ç—É—Å –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è)

## –§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è

- apps/api-core/src/modules/verification/providers/mvd.provider.ts
- apps/api-core/src/modules/verification/enums/region.enum.ts

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
- [ ] –í—Å–µ 3 —Ç–∏–ø–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –†–µ–≥–∏–æ–Ω—ã –º–∞–ø–ø—è—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–∞—Ä—Å–∏—Ç—Å—è
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –∫–æ—Ä–æ—Ç–∫–∏–º TTL

## –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
```

---

### 9.8 PROMPT: Backend ‚Äî –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

```
## –ó–∞–¥–∞—á–∞: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å endpoint –ø–æ–ª–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Å–µ—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

## –ö–æ–Ω—Ç–µ–∫—Å—Ç
- –ú–æ–¥—É–ª—å: apps/api-core/src/modules/verification/
- –î–æ–ª–∂–µ–Ω –≤—ã–∑—ã–≤–∞—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ

## –¶–µ–ª—å
–°–æ–∑–¥–∞—Ç—å endpoint –¥–ª—è –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

```typescript
interface FullVerificationDto {
  // –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–∞—Ç–µ–Ω—Ç–∞
  patent?: {
    docSeries: string;
    docNumber: string;
    blankSeries: string;
    blankNumber: string;
    passportNumber: string;
  };

  // –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–ø—Ä–µ—Ç–∞ –∏ –ò–ù–ù
  passport?: {
    surnameLat: string;
    nameLat: string;
    surnameCyr?: string;
    nameCyr?: string;
    gender: 'M' | 'F';
    birthDate: string;
    citizenship: string;
    docType: string;
    docNumber: string;
    docDate?: string;
  };

  // –î–ª—è –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ 90/180
  borderCrossings?: BorderCrossing[];

  // –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  rvpApplication?: { region: string; docNumber: string };
  vnjApplication?: { region: string; docNumber: string };
  citizenshipApplication?: { region: string };
}
```

## –í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

```typescript
interface FullVerificationResult {
  overallStatus: 'OK' | 'WARNING' | 'CRITICAL';
  summary: string;
  results: {
    patent?: PatentCheckResult;
    entryBan?: EntryBanCheckResult;
    inn?: InnResult;
    stayCalculation?: StayCalculation;
    rvpReadiness?: ReadinessResult;
    vnjReadiness?: ReadinessResult;
    citizenshipReadiness?: ReadinessResult;
  };
  warnings: string[];
  errors: string[];
  checkedAt: Date;
}
```

## –õ–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è overallStatus

- CRITICAL: –ø–∞—Ç–µ–Ω—Ç –∞–Ω–Ω—É–ª–∏—Ä–æ–≤–∞–Ω, –µ—Å—Ç—å –∑–∞–ø—Ä–µ—Ç –Ω–∞ –≤—ä–µ–∑–¥, –Ω–∞—Ä—É—à–µ–Ω 90/180
- WARNING: –æ—Å—Ç–∞–ª–æ—Å—å –º–∞–ª–æ –¥–Ω–µ–π, –¥–æ–∫—É–º–µ–Ω—Ç—ã —Å–∫–æ—Ä–æ –∏—Å—Ç–µ–∫–∞—é—Ç
- OK: –≤—Å—ë –≤ –ø–æ—Ä—è–¥–∫–µ

## –®–∞–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. –°–æ–∑–¥–∞—Ç—å FullVerificationService:
   ```typescript
   @Injectable()
   class FullVerificationService {
     async verify(dto: FullVerificationDto): Promise<FullVerificationResult>;
   }
   ```

2. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–æ–∫:
   ```typescript
   const results = await Promise.allSettled([
     this.checkPatent(dto.patent),
     this.checkEntryBan(dto.passport),
     this.getInn(dto.passport),
     this.calculateStay(dto.borderCrossings),
     // ...
   ]);
   ```

3. –ê–≥—Ä–µ–≥–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞

4. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è summary –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ

## –§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è

- apps/api-core/src/modules/verification/services/full-verification.service.ts
- apps/api-core/src/modules/verification/dto/full-verification.dto.ts

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
- [ ] –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
- [ ] –û—à–∏–±–∫–∞ –æ–¥–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Å—Ç–∞–ª—å–Ω—ã–µ
- [ ] overallStatus –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] Summary —á–∏—Ç–∞–µ–º—ã–π –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–π
- [ ] –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è < 2 –º–∏–Ω—É—Ç

## –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—ã–π flow
```

---

### 9.9 PROMPT: Backend ‚Äî –ü—Ä–æ–≤–∞–π–¥–µ—Ä –∫–∞–ø—á–∏

```
## –ó–∞–¥–∞—á–∞: –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –∫–∞–ø—á–∏

## –ö–æ–Ω—Ç–µ–∫—Å—Ç
- –ú–æ–¥—É–ª—å: apps/api-core/src/modules/verification/
- –°–µ—Ä–≤–∏—Å: 2Captcha (–æ—Å–Ω–æ–≤–Ω–æ–π), Anti-Captcha (fallback)
- –ö–∞–ø—á–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –Ω–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö –ú–í–î –∏ –§–ù–°

## –¶–µ–ª—å
–°–æ–∑–¥–∞—Ç—å —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –∫–∞–ø—á–∏

## –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å

```typescript
interface CaptchaProvider {
  solve(imageBase64: string): Promise<string>;
  solveRecaptcha(siteKey: string, pageUrl: string): Promise<string>;
  reportIncorrect(captchaId: string): Promise<void>;
  getBalance(): Promise<number>;
}
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```typescript
interface CaptchaConfig {
  provider: 'twocaptcha' | 'anticaptcha';
  apiKey: string;
  timeout: number;  // ms
  maxRetries: number;
  fallbackProvider?: CaptchaConfig;
}
```

## –®–∞–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. –°–æ–∑–¥–∞—Ç—å CaptchaProvider:
   ```typescript
   @Injectable()
   class CaptchaProvider {
     constructor(
       private config: CaptchaConfig,
       private httpService: HttpService,
     ) {}

     async solve(imageBase64: string): Promise<string>;
     async solveWithRetry(imageBase64: string): Promise<string>;
   }
   ```

2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å 2Captcha API:
   - POST /in.php ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ –∫–∞–ø—á–∏
   - GET /res.php ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
   - Polling —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º 5 —Å–µ–∫—É–Ω–¥

3. Fallback –Ω–∞ Anti-Captcha –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–∞–ª–∞–Ω—Å–∞ –∏ –∞–ª–µ—Ä—Ç—ã

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```env
CAPTCHA_PROVIDER=twocaptcha
CAPTCHA_API_KEY=your_api_key
CAPTCHA_TIMEOUT=60000
CAPTCHA_MAX_RETRIES=3

# Fallback
CAPTCHA_FALLBACK_PROVIDER=anticaptcha
CAPTCHA_FALLBACK_API_KEY=your_fallback_key
```

## –§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è

- apps/api-core/src/modules/verification/providers/captcha.provider.ts
- apps/api-core/src/modules/verification/config/captcha.config.ts

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
- [ ] 2Captcha –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Anti-Captcha fallback —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Retry –ª–æ–≥–∏–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–∞–ª–∞–Ω—Å–∞
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (—Ç–∞–π–º–∞—É—Ç, –Ω–µ–≤–µ—Ä–Ω–∞—è –∫–∞–ø—á–∞)

## –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å —Ä–µ–∞–ª—å–Ω–æ–π –∫–∞–ø—á–µ–π
```

---

### 9.10 PROMPT: Frontend ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è API –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

```
## –ó–∞–¥–∞—á–∞: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å API –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤–æ frontend

## –ö–æ–Ω—Ç–µ–∫—Å—Ç
- –ú–æ–¥—É–ª—å: apps/frontend/src/features/verification/
- API: apps/api-core —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- –°—Ç–µ–∫: React Query v5, Zustand, TypeScript

## –¶–µ–ª—å
–ü–æ–¥–∫–ª—é—á–∏—Ç—å UI –∫ backend –∏ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–æ–∫

## –®–∞–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 1. –î–æ–±–∞–≤–∏—Ç—å API –º–µ—Ç–æ–¥—ã –≤ client

```typescript
// src/lib/api/verification.ts
export const verificationApi = {
  checkPatent: (data: CheckPatentDto) =>
    apiClient.post<PatentCheckResult>('/verification/patent', data),

  checkEntryBan: (data: CheckEntryBanDto) =>
    apiClient.post<EntryBanCheckResult>('/verification/entry-ban', data),

  getInn: (data: GetInnDto) =>
    apiClient.post<InnResult>('/verification/inn', data),

  calculateStay: (data: CalculateStayDto) =>
    apiClient.post<StayCalculation>('/verification/stay-calculator', data),

  fullVerification: (data: FullVerificationDto) =>
    apiClient.post<FullVerificationResult>('/verification/full', data),
};
```

### 2. React Query hooks

```typescript
// src/features/verification/hooks/useVerification.ts
export function usePatentCheck() {
  return useMutation({
    mutationFn: verificationApi.checkPatent,
    onSuccess: (data) => {
      // –û–±–Ω–æ–≤–∏—Ç—å store
    },
  });
}

export function useFullVerification() {
  return useMutation({
    mutationFn: verificationApi.fullVerification,
  });
}
```

### 3. Zustand store

```typescript
// src/features/verification/store/verificationStore.ts
interface VerificationStore {
  results: {
    patent?: PatentCheckResult;
    entryBan?: EntryBanCheckResult;
    inn?: InnResult;
    stayCalculation?: StayCalculation;
  };
  lastCheckedAt?: Date;
  isLoading: boolean;
  setResult: (type: string, result: any) => void;
  clearResults: () => void;
}
```

### 4. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

```typescript
// src/features/verification/components/VerificationResultModal.tsx
- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
- –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è (–∑–µ–ª—ë–Ω—ã–π/–∂—ë–ª—Ç—ã–π/–∫—Ä–∞—Å–Ω—ã–π)
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–∞–∂–¥–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –¥–µ–π—Å—Ç–≤–∏—è–º
```

### 5. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ API
- Retry –∫–Ω–æ–ø–∫–∞
- Offline —Ä–µ–∂–∏–º (–ø–æ–∫–∞–∑–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫—ç—à)

## –§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/–∏–∑–º–µ–Ω–µ–Ω–∏—è

- apps/frontend/src/lib/api/verification.ts
- apps/frontend/src/features/verification/hooks/useVerification.ts
- apps/frontend/src/features/verification/store/verificationStore.ts
- apps/frontend/src/features/verification/components/VerificationResultModal.tsx
- apps/frontend/src/features/verification/components/VerificationResultCard.tsx

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
- [ ] –í—Å–µ API –º–µ—Ç–æ–¥—ã –ø–æ–¥–∫–ª—é—á–µ–Ω—ã
- [ ] React Query hooks —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] Store –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
- [ ] –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ UI
- [ ] Loading —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è
- [ ] –û—à–∏–±–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ IndexedDB

## –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
npm run dev ‚Äî –ø–æ–ª–Ω—ã–π —Ç–µ—Å—Ç flow
```

---

## 8. –ò—Å—Ç–æ—á–Ω–∏–∫–∏

- [–°–µ—Ä–≤–∏—Å—ã –ì–£–í–ú –ú–í–î](https://—Å–µ—Ä–≤–∏—Å—ã.–≥—É–≤–º.–º–≤–¥.—Ä—Ñ/)
- [–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ç–µ–Ω—Ç–∞ ‚Äî –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è](https://www.glavbukh.ru/art/386776-kak-proverit-patent-na-deystvitelnost-na-sayte-mvd)
- [–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—Ä–µ—Ç–∞ –Ω–∞ –≤—ä–µ–∑–¥](https://reestrzapreta.ru/proverit-zapret-na-viezd)
- [–£–∑–Ω–∞—Ç—å –ò–ù–ù ‚Äî –§–ù–°](https://service.nalog.ru/inn.do)
- [API –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–∞—Ç–µ–Ω—Ç–æ–≤](https://newdb.net/fiz/patent)
- [–ö–æ–¥—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –§–ù–°](https://www.consultant.ru/document/cons_doc_LAW_309124/)
